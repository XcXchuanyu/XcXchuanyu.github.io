<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css"><script class="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"example.com",root:"/",scheme:"Pisces",version:"8.0.2",exturl:!1,sidebar:{position:"left",display:"always",padding:18,offset:12},copycode:!1,bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"fadeInDown",post_body:"fadeInDown",coll_header:"fadeInLeft",sidebar:"fadeInUp"}},prism:!1,i18n:{placeholder:"Searching...",empty:"We didn't find any results for the search: ${query}",hits_time:"${hits} results found in ${time} ms",hits:"${hits} results found"}}</script><meta property="og:type" content="website"><meta property="og:title" content="SuperXcX的工地现场"><meta property="og:url" content="http://example.com/page/2/index.html"><meta property="og:site_name" content="SuperXcX的工地现场"><meta property="og:locale" content="en_US"><meta name="twitter:card" content="summary"><link rel="canonical" href="http://example.com/page/2/"><script class="page-configurations">CONFIG.page={sidebar:"",isHome:!0,isPost:!1,lang:"en"}</script><title>SuperXcX的工地现场</title><noscript><style>body{margin-top:2rem}.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header,.use-motion .sidebar{visibility:visible}.use-motion .footer,.use-motion .header,.use-motion .site-brand-container .toggle{opacity:initial}.use-motion .custom-logo-image,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line{transform:scaleX(1)}.search-pop-overlay,.sidebar-nav{display:none}.sidebar-panel{display:block}</style></noscript><link rel="alternate" href="/atom.xml" title="SuperXcX的工地现场" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">SuperXcX的工地现场</h1><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">请各位访客带好安全帽</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li></ul></nav></div><div class="toggle sidebar-toggle"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-overview-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="sidebar-panel-container"><section class="post-toc-wrap sidebar-panel"></section><section class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="" src="/images/apple-touch-icon-next.png"><p class="site-author-name" itemprop="name"></p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">23</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><span class="site-state-item-count">4</span> <span class="site-state-item-name">categories</span></div></nav></div><div class="cc-license site-overview-item animated" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></section></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner index posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="http://example.com/uncategorized/TechReview/zookeeper/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/apple-touch-icon-next.png"><meta itemprop="name" content=""><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="SuperXcX的工地现场"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/uncategorized/TechReview/zookeeper/" class="post-title-link" itemprop="url">zookeeper复习</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-03-16 12:25:03 / Modified: 14:13:40" itemprop="dateCreated datePublished" datetime="2021-03-16T12:25:03+08:00">2021-03-16</time></span></div></div></header><div class="post-body" itemprop="articleBody"><p>Zookeeper 是一个开放源码的分布式协调服务， 它是集群的管理者，监视着集群中各个节点的状态根据节点提交的反馈进行下一步合理操作。最终， 将简单易用的接口和性能高效、功能稳定的系统提供给用户。提供：文件系统，通知机制。</p><p>保证了分布式一致性特征：顺序一致性，原子性， 单一视图，可靠性，实时性。</p><p>读请求 - 单一机器处理； 写请求 - 多机器达成一致后处理</p><p>ZAB协议：分布式协调服务Zookeeper 专门设计的一种支持<strong>崩溃恢复</strong>的原子<strong>广播</strong>协议。</p><h3 id="zookeeper文件系统"><a href="#zookeeper文件系统" class="headerlink" title="zookeeper文件系统"></a>zookeeper文件系统</h3><p>Zookeeper 为了保证高吞吐和低延迟， 在内存中维护了这个树状的目录结构， 这种特性使得Zookeeper 不能用于存放大量的数据， 每个节点的存放数据上限为1M。<br>多层级命名空间（znode）</p><h3 id="zookeeper-Watcher"><a href="#zookeeper-Watcher" class="headerlink" title="zookeeper Watcher"></a>zookeeper Watcher</h3><p>客户端注册watcher, 服务端处理watcher, 客户端回调watcher</p><h3 id="四种类型的数据节点znode"><a href="#四种类型的数据节点znode" class="headerlink" title="四种类型的数据节点znode:"></a>四种类型的数据节点znode:</h3><ol><li>持久节点 2. 临时节点 3. 持久顺序节点（追加顺序书行，节点名后面会追加一个由父节点维护的自增整型数字） 4.临时顺序节点</li></ol><h3 id="节点的角色与工作状态"><a href="#节点的角色与工作状态" class="headerlink" title="节点的角色与工作状态"></a>节点的角色与工作状态</h3><p><strong>角色</strong></p><p>Leader 事务请求的调度和处理，保证顺序性；内部服务调度</p><p>Follower 处理非事务请求， 投票</p><p>Observer 3.0后引入用于提升集群非事务处理能力，处理非事务请求， 不投票</p><p><strong>四种工作状态</strong></p><p>Looking: 寻找leader,进入leader选举状态<br>Following: follower<br>Leading: Leader<br>Observing: Observer</p><h3 id="ZK集群"><a href="#ZK集群" class="headerlink" title="ZK集群"></a>ZK集群</h3><p>follower宕机，两个服务器继续提供服务，半数节点正常即可继续工作<br>Leader宕机，zookeeper选举新的Leader<br>部署模式：单机，伪分布，集群<br>单机与伪分布：都是单机运行，单机模式直接用本地文件系统，伪分布式用不同java进程模拟分布式结点<br>扩容： 1. 全部重启 2. 根据过半存活原则逐个重启</p><p>zookeeper客户端：zkclient或Curator</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="http://example.com/uncategorized/TechReview/Kafka/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/apple-touch-icon-next.png"><meta itemprop="name" content=""><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="SuperXcX的工地现场"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/uncategorized/TechReview/Kafka/" class="post-title-link" itemprop="url">Kafka复习</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-03-16 11:33:54 / Modified: 15:33:07" itemprop="dateCreated datePublished" datetime="2021-03-16T11:33:54+08:00">2021-03-16</time></span></div></div></header><div class="post-body" itemprop="articleBody"><p><img src="D:\myGithub\blog\source_posts\image\kafka_structure.png"></p><p>Broker: 一个kafka节点，储存与转发，一个broker多个topics</p><p>Topic: 消息</p><p>offset: 消息在日志中的位置，topic在partition上的偏移量</p><p>partition: topic分区，一个topic多个partition</p><p>Zookeeper: 保存broker、topic、partition等meta数据，broker故障发现，选举leader、负载均衡</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="http://example.com/uncategorized/TechReview/Hbase/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/apple-touch-icon-next.png"><meta itemprop="name" content=""><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="SuperXcX的工地现场"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/uncategorized/TechReview/Hbase/" class="post-title-link" itemprop="url">Hbase复习</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-03-16 11:33:41 / Modified: 15:52:35" itemprop="dateCreated datePublished" datetime="2021-03-16T11:33:41+08:00">2021-03-16</time></span></div></div></header><div class="post-body" itemprop="articleBody"><p>Hbase 是分布式、面向列的开源数据库（其实准确的说是面向列族）。HDFS 为Hbase 提供可靠的底层数据存储服务，MapReduce 为Hbase 提供高性能的计算能力，Zookeeper 为Hbase 提供稳定服务和Failover 机制，因此我们说Hbase 是一个通过大量廉价的机器解决海量数据的高速存储和读取的分布式数据库解决方案。</p><h3 id="Column-Family"><a href="#Column-Family" class="headerlink" title="Column Family"></a>Column Family</h3><p>创建表时就可以实现数据存</p><h3 id="Rowkey"><a href="#Rowkey" class="headerlink" title="Rowkey"></a>Rowkey</h3><p>用TimeStamp来区分同一rowkey下的数据</p><p>写操作： 1. 获取RegionSever 2. 请求些Hlog 3. 请求写MemStore（之后逐渐刷入HDFS中）</p><p><img src="D:\myGithub\blog\source_posts\image\hbase-structure.png"></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="http://example.com/uncategorized/TechReview/Hive/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/apple-touch-icon-next.png"><meta itemprop="name" content=""><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="SuperXcX的工地现场"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/uncategorized/TechReview/Hive/" class="post-title-link" itemprop="url">Hive复习</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-03-16 11:21:20" itemprop="dateCreated datePublished" datetime="2021-03-16T11:21:20+08:00">2021-03-16</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Modified: 2021-03-17 00:34:43" itemprop="dateModified" datetime="2021-03-17T00:34:43+08:00">2021-03-17</time></span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="Hive"><a href="#Hive" class="headerlink" title="Hive"></a>Hive</h2><p>Hive 是一个构建在 Hadoop 之上的数据仓库，它可以将结构化的数据文件映射成表，并提供类 SQL 查询功能，用于查询的 SQL 语句会被转化为 MapReduce 作业，然后提交到 Hadoop 上运行。</p><p><img src="D:\myGithub\blog\source_posts\image\hive-structure.png"></p><h3 id="Metastore"><a href="#Metastore" class="headerlink" title="Metastore"></a>Metastore</h3><p>在 Hive 中，表名、表结构、字段名、字段类型、表的分隔符等统一被称为元数据。所有的元数据默认存储在 Hive 内置的 derby 数据库中，但由于 derby 只能有一个实例，也就是说不能有多个命令行客户端同时访问，所以在实际生产环境中，通常使用 MySQL 代替 derby。</p><p>Hive 进行的是统一的元数据管理，就是说你在 Hive 上创建了一张表，然后在 presto／impala／sparksql 中都是可以直接使用的，它们会从 Metastore 中获取统一的元数据信息，同样的你在 presto／impala／sparksql 中创建一张表，在 Hive 中也可以直接使用。</p><p>skewindata, key 随机进桶</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="http://example.com/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Computing/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/apple-touch-icon-next.png"><meta itemprop="name" content=""><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="SuperXcX的工地现场"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Computing/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/" class="post-title-link" itemprop="url">进程相关</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-03-15 19:44:34" itemprop="dateCreated datePublished" datetime="2021-03-15T19:44:34+08:00">2021-03-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Modified: 2021-03-19 18:56:33" itemprop="dateModified" datetime="2021-03-19T18:56:33+08:00">2021-03-19</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">操作系统</span></a></span></span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="进程间的通信方式"><a href="#进程间的通信方式" class="headerlink" title="进程间的通信方式"></a>进程间的通信方式</h2><ol><li><p>管道</p><blockquote><p>netstat -tulnp | grep 8080// 匿名管道<br>mkfifo test<br>echo “hahaha” &gt; test //命名管道<br>机制类似于缓存，进程会等待另一个进程取出数据，<strong>单向传播</strong></p></blockquote></li><li><p>消息队列<br>也类似于缓存，将数据写入内存，可以不等待取出<br>con: 数据量大很占内存</p></li><li><p>共享内存<br>两个进程共享一块虚拟内存空间，进行内存共享</p></li><li><p>信号量<br>一种计数器，类似于锁</p></li><li><p>socket<br>两台主机远程通信</p></li></ol><h2 id="进程（process）与线程（thread）"><a href="#进程（process）与线程（thread）" class="headerlink" title="进程（process）与线程（thread）"></a>进程（process）与线程（thread）</h2><p>工厂：CPU<br>进程： 车间<br>线程： 工人<br>工厂共享空间: 内存<br>给内存的锁：互斥锁（Mutex），防止多线程读写同一内存<br>可以限制线程数量,在门口挂n把钥匙：信号量（Semaphore）</p><h2 id="操作系统设计"><a href="#操作系统设计" class="headerlink" title="操作系统设计"></a>操作系统设计</h2><ul><li>多进程 – 多任务</li><li>多线程 – 单任务多线程</li><li>协调机制，防止线程与线程，进程与进程冲突，运行共享资源</li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="http://example.com/network/Computing/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/apple-touch-icon-next.png"><meta itemprop="name" content=""><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="SuperXcX的工地现场"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/network/Computing/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B/" class="post-title-link" itemprop="url">TCP三次握手四次挥手</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-03-15 15:33:11" itemprop="dateCreated datePublished" datetime="2021-03-15T15:33:11+08:00">2021-03-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Modified: 2021-03-19 18:56:24" itemprop="dateModified" datetime="2021-03-19T18:56:24+08:00">2021-03-19</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/network/" itemprop="url" rel="index"><span itemprop="name">网络</span></a></span></span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="TCP三次握手"><a href="#TCP三次握手" class="headerlink" title="TCP三次握手"></a>TCP三次握手</h2><p>刚开始客户端处于 closed 的状态，服务端处于 listen 状态。</p><p><strong>第一次握手</strong>：建立连接时，客户端发送syn包（syn=j）[j 是 Client初始化序列号]到服务器，并进入SYN_SENT状态，等待服务器确认；SYN：同步序列编号（Synchronize Sequence Numbers）。</p><p><strong>第二次握手</strong>：服务器收到syn包，必须确认客户的SYN, 准备ACK报文（ack=j+1），同时自己也发送一个SYN包（syn=k）[k 是 Server 的初始化序列号]，即SYN+ACK包，此时服务器进入SYN_RECV状态；</p><p><strong>第三次握手</strong>：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=k+1），此包发送完毕，客户端和服务器进入ESTABLISHED（TCP连接成功）状态，完成三次握手</p><h3 id="三次握手目的"><a href="#三次握手目的" class="headerlink" title="三次握手目的"></a>三次握手目的</h3><ul><li>确认双方的接收与发送能力是否正常。</li><li>指定初始化序列号</li><li>为https做准备</li></ul><blockquote><p>这里我顺便解释一下为啥只有三次握手才能确认双方的接受与发送能力是否正常，而两次却不可以：<br>第一次握手：客户端发送网络包，服务端收到了。服务端：客户端的发送能力、服务端的接收能力是正常的。<br>第二次握手：服务端发包，客户端收到了。客户端：服务端的接收、发送能力，客户端的接收、发送能力是正常的。<br>第三次握手：客户端发包，服务端收到了。服务端：客户端的接收、发送能力正常，服务器自己的发送、接收能力也正常。</p></blockquote><h3 id="其他考点"><a href="#其他考点" class="headerlink" title="其他考点"></a>其他考点</h3><p>ISN是动态生成的，防止攻击者猜出确认号</p><p>半连接队列：服务器第一次收到客户端的 SYN 之后，就会处于 SYN_RCVD 状态，此时双方还没有完全建立其连接，服务器会把此种状态下请求连接放在一个队列里，我们把这种队列称之为<strong>半连接队列</strong>。当然还有一个<strong>全连接队列</strong>，就是已经完成三次握手，建立起连接的就会放在全连接队列中。如果队列满了就有可能会出现丢包现象。</p><h2 id="TCP四次挥手"><a href="#TCP四次挥手" class="headerlink" title="TCP四次挥手"></a>TCP四次挥手</h2><p>刚开始双方都处于 establised 状态，假如是客户端先发起关闭请求，则：</p><p>第一次挥手：客户端发送一个 FIN 报文，报文中会指定一个序列号。此时客户端处于<strong>FIN_WAIT1</strong>状态。</p><p>第二次握手(先发ACK)：服务端收到 FIN 之后，会发送 ACK 报文，且把客户端的序列号值 + 1 作为 ACK 报文的序列号值，表明已经收到客户端的报文了，此时服务端处于 <strong>CLOSE_WAIT</strong>状态。</p><p>第三次挥手(再发FIN)：如果服务端也想断开连接了，和客户端的第一次挥手一样，发给 FIN 报文，且指定一个序列号。此时服务端处于 <strong>LAST_ACK</strong> 的状态。</p><p>第四次挥手：客户端收到 FIN 之后，一样发送一个 ACK 报文作为应答，且把服务端的序列号值 + 1 作为自己 ACK 报文的序列号值，此时客户端处于 <strong>TIME_WAIT</strong> 状态。需要过一阵子以确保服务端收到自己的 ACK 报文之后才会进入 CLOSED 状态</p><p>服务端收到 ACK 报文之后，就处于关闭连接了，处于 CLOSED 状态。</p><p>考点：</p><p>为什么客户端发送 ACK 之后不直接关闭，而是要等一阵子才关闭。这其中的原因就是，要确保服务器是否已经收到了我们的 ACK 报文，如果没有收到的话，服务器会重新发 FIN 报文给客户端，客户端再次收到 FIN 报文之后，就知道之前的 ACK 报文丢失了，然后再次发送 ACK 报文。</p><p>至于 TIME_WAIT 持续的时间至少是一个报文的来回时间(2MSL)。一般会设置一个计时，如果过了这个计时没有再次收到 FIN 报文，则代表对方成功就是 ACK 报文，此时处于 CLOSED 状态。</p><p>Source:<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_18425655/article/details/52163228">https://blog.csdn.net/qq_18425655/article/details/52163228</a><br><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903834708344840#heading-0">https://juejin.cn/post/6844903834708344840#heading-0</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="http://example.com/network/Computing/proxy/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/apple-touch-icon-next.png"><meta itemprop="name" content=""><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="SuperXcX的工地现场"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/network/Computing/proxy/" class="post-title-link" itemprop="url">正向代理与反向代理</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-02-26 19:31:50" itemprop="dateCreated datePublished" datetime="2021-02-26T19:31:50+08:00">2021-02-26</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Modified: 2021-03-19 18:54:09" itemprop="dateModified" datetime="2021-03-19T18:54:09+08:00">2021-03-19</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/network/" itemprop="url" rel="index"><span itemprop="name">网络</span></a></span></span></div></div></header><div class="post-body" itemprop="articleBody"><ol><li><p>正向代理</p><p>代理访问外部资源</p><p>正向代理 是一个位于客户端和原始服务器(origin server)之间的服务器，为了从原始服务器取得内容，客户端向代理发送一个请求并指定目标(原始服务器)，然后代理向原始服务器转交请求并将获得的内容返回给客户端。客户端必须要进行一些特别的设置才能使用正向代理。</p></li></ol><ol start="2"><li><p>反向代理</p><p>反向代理以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个服务器。</p></li></ol><ol start="3"><li><p>反向代理的作用：</p><p>（1）保证内网的安全，可以使用反向代理提供WAF功能，阻止web攻击</p><p>（2）负载均衡，通过反向代理服务器来优化网站的负载</p></li></ol><p><img src="https://images2015.cnblogs.com/blog/305504/201611/305504-20161112125907030-1432469707.png" alt="img"></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="http://example.com/uncategorized/Study/CS5331%20Web%20Security/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/apple-touch-icon-next.png"><meta itemprop="name" content=""><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="SuperXcX的工地现场"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/uncategorized/Study/CS5331%20Web%20Security/" class="post-title-link" itemprop="url">CS5331 Web Security</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-02-26 13:52:46" itemprop="dateCreated datePublished" datetime="2021-02-26T13:52:46+08:00">2021-02-26</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Modified: 2021-03-16 19:22:47" itemprop="dateModified" datetime="2021-03-16T19:22:47+08:00">2021-03-16</time></span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="Lecture-2-Network-level-attacks"><a href="#Lecture-2-Network-level-attacks" class="headerlink" title="Lecture 2: Network-level attacks"></a>Lecture 2: Network-level attacks</h2><h3 id="Defeating-HTTPS-2"><a href="#Defeating-HTTPS-2" class="headerlink" title="Defeating HTTPS[2*]"></a>Defeating HTTPS[2*]</h3><p><strong>Https Downgrade</strong> : insert http links in the web page</p><p>Defense of https downgrade: HTTP Strict Transport Security(HSTS)</p><p>Idea: supplies a header over HTTPS</p><p><strong>User coopting &amp; caching flaws</strong>: images and icons contains the tricks to coopting users to click-through</p><p><strong>Mixed content</strong>(mixture of https links and http link)</p><p>Passive mixed content: doesn’t interact with the rest of the page</p><p>Active mixed content: interacts with the page</p><p>Defense: use “protocol-relative URLs”, use content security policy (CSP)</p><h3 id="CA-compromise-2"><a href="#CA-compromise-2" class="headerlink" title="CA compromise[2*]"></a>CA compromise[2*]</h3><p>weak browser trust model and added root CAs by system providers</p><p>Defense: Certificate Revocation (证书吊销) support by CRL and OCSP</p><p>Certificate Pinning(证书锁定) 在应用中锁定目标域的资源，不信任root CA</p><p>Certificate Transparency(证书透明度)</p><p>Component: 1）Certificate Logs；2）Certificate Monitors；3）Certificate Auditors</p><h3 id="Other-Attack-1"><a href="#Other-Attack-1" class="headerlink" title="Other Attack[1*]"></a>Other Attack[1*]</h3><p><strong>DNS attack</strong></p><ol><li>modify in-transit DNS response</li><li>find software vulnerabilities in DNS software</li><li>change the Query ID to give wrong response</li></ol><p><strong>Secure Channels</strong>: Defense against network attacks</p><p>SSL + HTTP = HTTPS (TSL is the revolution of SSL)</p><p>HTTPS session: 1. ciphers negotiation 2. AKE(Authenticated Key Exchange) 3. Symmetric Key Encryption</p><p>Chain of certificates: Root CAs(baked in your browser): can designate intermediate CA.</p><h2 id="Lecture-3-Session-Attack"><a href="#Lecture-3-Session-Attack" class="headerlink" title="Lecture 3: Session Attack"></a>Lecture 3: Session Attack</h2><p><img src="https://pic2.zhimg.com/v2-a0d10af45e785fe8d3f5cd12f8c309f5_b.jpg" alt="img"></p><h3 id="Cookies-Session-Cloning-Session-Riding-CSRF-3"><a href="#Cookies-Session-Cloning-Session-Riding-CSRF-3" class="headerlink" title="Cookies, Session Cloning, Session Riding/ CSRF[3*]"></a>Cookies, Session Cloning, Session Riding/ CSRF[3*]</h3><p><strong>HTTP</strong>: Stateless Protocol(maintains no information about the connection)</p><p><strong>Session ID</strong> is states on the client side: 1. URL parameter 2. Hidden HTML 3. COOKIES</p><p><strong>Cookie</strong> contains whatever the server puts in</p><p>persistent cookies(file system, store in a database) and non-persistent cookie(browser memory)</p><p>Usage: user authentication, personalization, user tracking</p><p>depend on: domain/path, but can access belonging to same domain</p><p><strong>Cookie Authentication</strong></p><img src="C:\Users\Charlas xia\AppData\Roaming\Typora\typora-user-images\image-20210227163851245.png" alt="image-20210227163851245" style="zoom:50%"><p><strong>Session Cloning:</strong> Change the session id in the cookies</p><p>Attack methods: edit cookies in local file system, 2) change cookie in browser memory 3) Browser itself can be malicious 4) network-level web manipulation proxy</p><p>Defense: using input validation ensure the integrity of state data 2) digitally sign or hash the variable 3) encrypt information in the URL and cookie 4) Long and random session ID 5) Dynamic session ID</p><p><strong>Session Riding</strong></p><p>CSRF(cross-site request forgery) a malicious site forge a stealthy request with GET or POST method</p><p>Basic CSRF(“session riding”) Login CSRF(“session feeding”, login into attack’s account and do the things) Router-Targeting CSRF</p><p>Defense: Make sure the request’s source(<strong>HTTP Referrer Validation</strong> check referrer header, <strong>Secret Validation Tokens</strong> use a random number in all steps of a transaction, <strong>Same-Site Cookie</strong>: prevent browser from sending the cookie along with cross-site{有点忘了!!!!})</p><p>Graphical Turing test(图形验证码)</p><h3 id="Third-party-cookies-2"><a href="#Third-party-cookies-2" class="headerlink" title="Third-party cookies[2*]"></a>Third-party cookies[2*]</h3><p>e.g. send a image from doubleclick.com to track people</p><h3 id="Same-Origin-Policy-2"><a href="#Same-Origin-Policy-2" class="headerlink" title="Same Origin Policy[2*]"></a>Same Origin Policy[2*]</h3><p>scripts from one origin can only access objects or services from the same origin</p><p>Principals: website, the owner of script</p><p>Resources: Cookies, Display, Network communication</p><p>Intuitive access control: Object and services</p><p>How to define origin: protocol, host and port.(only all same can access the resources)</p><p>PostMessage(): cross-frame communication channels</p><img src="C:\Users\Charlas xia\AppData\Roaming\Typora\typora-user-images\image-20210227195505720.png" alt="image-20210227195505720" style="zoom:30%"> <img src="C:\Users\Charlas xia\AppData\Roaming\Typora\typora-user-images\image-20210227195523667.png" alt="image-20210227195523667" style="zoom:30%"><p>Relaxing SOP: orders.company.com/catalog.company.com use domain lowering using <em>document.domain</em></p><p>Cross-Origin Resource Sharing: Certain cross-domain network request are forbidden like Ajax but allows origin B to give permission to origin A.</p><h3 id="Cross-site-Scripting-3"><a href="#Cross-site-Scripting-3" class="headerlink" title="Cross-site Scripting[3*]"></a>Cross-site Scripting[3*]</h3><p><strong>Web Attacker</strong>: Owns a valid domain, server with an SSL certificate</p><p><strong>XSS</strong>: Vulnerability of web application, failure in detecting scripts in inputs</p><p>**type1:**Reflected XSS: change the parameters with crafted URL to the web application, and web application returns pages including malicious script</p><p><strong>type2:</strong> Persistent XSS: use storage to the parser</p><p><strong>type3:</strong> DOM-based XSS: html script in website DOM generate the attack,the browser generate the malicious code</p><p><strong>type3a:</strong> Mutation XSS[not required]</p><img src="C:\Users\Charlas xia\AppData\Roaming\Typora\typora-user-images\image-20210227204503257.png" alt="image-20210227204503257" style="zoom:50%"><p>? will send to server and # will not</p><p><strong>Defeat</strong>: 1) Input validation/filtering 2) Input sanitization/escaping/encoding 3) use of more specific API</p><ol><li><p>Blacklisting and Whitelisting</p></li><li><p>Input Sanitization: use HTML encoding to prevent reflected XSS | Browser-side Filtering | Do matching after parsing</p></li><li><p>use of a more specific and less powerful JavaScript API</p></li><li><p>Other: use CSP; make cookies inaccessible to scripts</p></li></ol><h3 id="CSP-1"><a href="#CSP-1" class="headerlink" title="CSP[1*]"></a>CSP[1*]</h3><p>an HTTP header, provides a whitelist of sources of trusted content, instruct the browser to only execute specific resources</p><h2 id="Lecture-4-Server-side-Injection-Attacks"><a href="#Lecture-4-Server-side-Injection-Attacks" class="headerlink" title="Lecture 4: Server-side Injection Attacks"></a>Lecture 4: Server-side Injection Attacks</h2><h3 id="SQL-Injection-2"><a href="#SQL-Injection-2" class="headerlink" title="SQL Injection[2*]"></a>SQL Injection[2*]</h3><p>Three tier architecture: Client-&gt;Application Server-&gt;Database Server</p><p><strong>common pattern</strong> create SQL statement as strings, sends the statements to DB Server</p><p>SELECT * FROM user_data WHERE user_id = 0 OR 1=1</p><p><strong>Prepared Statements</strong>: less powerful API: only run what you want, properly separates control and data channel</p><p><strong>Other Defenses</strong>: use the proper query invocation function,randomize database schema, use principle of least privilege(only select, no insert/update/drop permission)</p><h3 id="Command-Injection-3"><a href="#Command-Injection-3" class="headerlink" title="Command Injection[3*]"></a>Command Injection[3*]</h3><p>Most common <strong>attack goals</strong>: Dump server’s password file, add an admin user</p><p><strong>Defense</strong>: 1. apply input validation by using a whitelist, 2. apply input escaping: add single quotes around a string, 3. use a less powerful and more specific API</p><h2 id="Lecture-5-Attacks-in-the-Application-logic"><a href="#Lecture-5-Attacks-in-the-Application-logic" class="headerlink" title="Lecture 5: Attacks in the Application logic"></a><strong>Lecture 5</strong>: Attacks in the Application logic</h2><h3 id="HTTP-Parameter-Pollution-HTTP-Parameter-Tampering-HTTP-Header-Injection-3"><a href="#HTTP-Parameter-Pollution-HTTP-Parameter-Tampering-HTTP-Header-Injection-3" class="headerlink" title="HTTP Parameter Pollution, HTTP Parameter Tampering, HTTP Header Injection[3*]"></a>HTTP Parameter Pollution, HTTP Parameter Tampering, HTTP Header Injection[3*]</h3><p>A malicious web user craft inputs</p><p>HPP: use more parameter in the URL;</p><p>HPT: validation bypassed and quantity be set as -4</p><p>Defense: Sanitize on the server; don’t trust all received HTTP, never place security-critical validation on the client</p><p>HHI: modify parameters in the response(X-XSS-Protection, SID)</p><h3 id="File-upload-vulnerability-1"><a href="#File-upload-vulnerability-1" class="headerlink" title="File upload vulnerability[1*]"></a>File upload vulnerability[1*]</h3><p>Use MIME-type validation, this type can be set by web clients via Content-Type header</p><p>Upload php files to do web-shell command and enable remote administration</p><p>Validating images using PHP’s getimagesize()</p><p>Other bad defense: blacklist bad file extensions</p><p>Good defense: whitelisting; Using a less powerful operation; Principle of least privilege; Isolation(Host on separate subdomain); Security by obscurity</p><h3 id="File-inclusion-vulnerability-2"><a href="#File-inclusion-vulnerability-2" class="headerlink" title="File inclusion vulnerability[2*]"></a>File inclusion vulnerability[2*]</h3><p>PHP include() and require()</p><p>take all the text/code/markup exist in the specified file and copies it into the file that uses the include statement</p><p>include: produce warning, require(): produce fatal error</p><p><strong>Remote File Inclusion</strong>: include and require can accept a remote file path</p><p><strong>Local File Inclusion:</strong> from the local current server</p><p><strong>Defense</strong></p><p>Both: avoid dynamically including files based on user input, maintain whitelist</p><p>Specific to RFI: disable allow_url_include|allow_url_fopen OFF</p><h3 id="Access-control-and-logic-bugs-1"><a href="#Access-control-and-logic-bugs-1" class="headerlink" title="Access control and logic bugs[1*]"></a>Access control and logic bugs[1*]</h3><p>user should no access control to user_add.php</p><p>Check is done at the app’s entry point: index.php</p><p>Other types: unprotected access(/admin)/ static file(123.pdf)/ parameter-based access control(admin = true)</p><p>Directory Traversal(Dot-Dot-Slash)</p><h2 id="Lecture-6-Web-Authorization"><a href="#Lecture-6-Web-Authorization" class="headerlink" title="Lecture 6: Web Authorization"></a>Lecture 6: Web Authorization</h2><p>web authentication: verifying is indeed; web authorization: decide user’s access resources</p><p>SSO login once and authenticate everywhere</p><h3 id="Kerberos-1"><a href="#Kerberos-1" class="headerlink" title="Kerberos[1*]"></a>Kerberos[1*]</h3><ol><li>user login session 2) type of service 3) service session</li></ol><p>web SSO: Identity provider(IDP), service provider(SP)</p><h3 id="Open-ID-OAuth-2"><a href="#Open-ID-OAuth-2" class="headerlink" title="Open ID OAuth[2*]"></a>Open ID OAuth[2*]</h3><p><strong>OpenID</strong> is open standard Entities: User, ID Provider, Web Application</p><p>Security Problems: Authentication Bugs(unauthorized parties log into victims’ account on the RP)</p><p>Privacy and trust issues: IDP has log of OpenID logins</p><p>Phishing: forward the user to a page asking user input their credentials</p><p>provide a service of assertion of identity</p><p><strong>OAuth:</strong> open standard for access delegation</p><p>allow <strong>access tokens</strong> to be issued to third-party clients</p><p><strong>Scopes</strong>: the authorization screen request permission screen[Scope to allow|deny]</p><p>an authorization protocol</p><p><strong>Weakness</strong>????</p><h3 id="SAML-1"><a href="#SAML-1" class="headerlink" title="SAML[1*]"></a>SAML[1*]</h3><p>Open standard for exchanging authentication and authorization data between parties(between IDP and RP/SP)</p><p>XML-based makeup language</p><h3 id="Web-SSO-Security-Problems-3"><a href="#Web-SSO-Security-Problems-3" class="headerlink" title="Web SSO Security Problems[3*]"></a>Web SSO Security Problems[3*]</h3><p>authorization: OAuth; authentication: OpenID (latest OpenID Connect runs on top of OAuth)</p><p>vulnerabilities: web user, IDP, SP not belong to the same organization; SSO operates on an open public network; runs on top of web and browser</p><p>Secret Token Leakage: transmitted through unencrypted channels</p><p>postmessage</p><h2 id="Lecture-7"><a href="#Lecture-7" class="headerlink" title="Lecture 7:"></a>Lecture 7:</h2><p>Some phishing attacks: homograph attack, picture-in-picture attack</p><p>Defense: user education, browser defenses, international domain name in the URL bar.</p><h3 id="Clickjacking"><a href="#Clickjacking" class="headerlink" title="Clickjacking"></a>Clickjacking</h3><p>iframe and screen access</p><p>Frame can overlap: outer iframe can create another overlapping iframe positioned over an embedded iframe</p><p>or use partial overlays</p><p>Timing attack: bait the user to perfrom a double-click then switch focus to popup window</p><h3 id="Copy-Paste-XSS"><a href="#Copy-Paste-XSS" class="headerlink" title="Copy-Paste XSS"></a>Copy-Paste XSS</h3><p>Self-XSS coercing users to copy-and-paste into the browser</p><p>Password cracking: shouldn’t be stored in plaintext, Defense: Hash</p><h2 id="Lecture-8-Browser-security"><a href="#Lecture-8-Browser-security" class="headerlink" title="Lecture 8: Browser security"></a>Lecture 8: Browser security</h2><p>Component view of browser and OS is similar</p><p>Authorities: web origin(protocol, host, port), PKI entities<br>Browser isolate web site from each other<br>app installation, browser sandbox makes sure websites will not affect local system</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="http://example.com/uncategorized/travel3/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/apple-touch-icon-next.png"><meta itemprop="name" content=""><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="SuperXcX的工地现场"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/uncategorized/travel3/" class="post-title-link" itemprop="url">2020回顾——旅行篇（二）</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-01-03 00:28:37" itemprop="dateCreated datePublished" datetime="2021-01-03T00:28:37+08:00">2021-01-03</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Modified: 2021-03-15 10:47:09" itemprop="dateModified" datetime="2021-03-15T10:47:09+08:00">2021-03-15</time></span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="2020回顾——旅行篇"><a href="#2020回顾——旅行篇" class="headerlink" title="2020回顾——旅行篇"></a>2020回顾——旅行篇</h2><h3 id="再顾云南"><a href="#再顾云南" class="headerlink" title="再顾云南"></a>再顾云南</h3><h4 id="昆明大理"><a href="#昆明大理" class="headerlink" title="昆明大理"></a>昆明大理</h4><h4 id="丽江"><a href="#丽江" class="headerlink" title="丽江"></a>丽江</h4><h4 id="香格里拉"><a href="#香格里拉" class="headerlink" title="香格里拉"></a>香格里拉</h4></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><nav class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a></nav><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2020 – <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder"></span></div><div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a></div></div></footer><script src="//cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script></body></html>